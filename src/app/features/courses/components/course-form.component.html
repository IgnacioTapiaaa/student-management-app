<mat-card class="form-card mat-elevation-z2">
  <mat-card-header>
    <mat-card-title>{{ formTitle }}</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="courseForm" (ngSubmit)="onSubmit()">
      <!-- Form Error Message -->
      <div class="form-error" *ngIf="courseForm.errors && courseForm.touched">
        <mat-error>{{ getFormError() }}</mat-error>
      </div>

      <div class="form-row">
        <!-- Course Name -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Course Name</mat-label>
          <input
            matInput
            formControlName="name"
            placeholder="Enter course name"
            autocomplete="off">
          <mat-error *ngIf="courseForm.controls.name.invalid">
            {{ getErrorMessage('name') }}
          </mat-error>
        </mat-form-field>

        <!-- Course Code -->
        <mat-form-field appearance="outline" class="form-field-small">
          <mat-label>Course Code</mat-label>
          <input
            matInput
            formControlName="code"
            placeholder="e.g., DWA-101"
            autocomplete="off">
          <mat-error *ngIf="courseForm.controls.code.invalid">
            {{ getErrorMessage('code') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <!-- Instructor -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Instructor</mat-label>
          <input
            matInput
            formControlName="instructor"
            placeholder="Enter instructor name"
            autocomplete="off">
          <mat-error *ngIf="courseForm.controls.instructor.invalid">
            {{ getErrorMessage('instructor') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <!-- Duration -->
        <mat-form-field appearance="outline" class="form-field-small">
          <mat-label>Duration (hours)</mat-label>
          <input
            matInput
            type="number"
            formControlName="duration"
            placeholder="Hours"
            min="1"
            max="200">
          <mat-error *ngIf="courseForm.controls.duration.invalid">
            {{ getErrorMessage('duration') }}
          </mat-error>
        </mat-form-field>

        <!-- Capacity -->
        <mat-form-field appearance="outline" class="form-field-small">
          <mat-label>Capacity</mat-label>
          <input
            matInput
            type="number"
            formControlName="capacity"
            placeholder="Max students"
            min="5"
            max="100">
          <mat-error *ngIf="courseForm.controls.capacity.invalid">
            {{ getErrorMessage('capacity') }}
          </mat-error>
        </mat-form-field>

        <!-- Enrolled (shown only in edit mode) -->
        <mat-form-field appearance="outline" class="form-field-small" *ngIf="courseToEdit">
          <mat-label>Enrolled</mat-label>
          <input
            matInput
            type="number"
            formControlName="enrolled"
            readonly>
          <mat-hint>Read-only</mat-hint>
        </mat-form-field>
      </div>

      <div class="form-row">
        <!-- Start Date -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Start Date</mat-label>
          <input
            matInput
            [matDatepicker]="startPicker"
            formControlName="startDate"
            placeholder="Select start date">
          <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
          <mat-datepicker #startPicker></mat-datepicker>
          <mat-error *ngIf="courseForm.controls.startDate.invalid">
            {{ getErrorMessage('startDate') }}
          </mat-error>
        </mat-form-field>

        <!-- End Date -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>End Date</mat-label>
          <input
            matInput
            [matDatepicker]="endPicker"
            formControlName="endDate"
            placeholder="Select end date">
          <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
          <mat-datepicker #endPicker></mat-datepicker>
          <mat-error *ngIf="courseForm.controls.endDate.invalid">
            {{ getErrorMessage('endDate') }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button
          mat-stroked-button
          type="button"
          (click)="onCancel()"
          class="cancel-button">
          Cancel
        </button>
        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="courseForm.invalid"
          class="submit-button">
          {{ submitButtonText }}
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
